<!DOCTYPE html>
<html xmlns:th="www.thymeleaf.org">
<head>
<meta charset="utf-8">
<title></title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="keywords" content="" />
<script type="application/x-javascript">
	
	
	
	
	
	
	
	
	
	
	
			addEventListener("load", function() {
				setTimeout(hideURLbar, 0);
			}, false);

			function hideURLbar() {
				window.scrollTo(0, 1);
			}
		










</script>
<!-- Bootstrap Core CSS -->
<link href="css/bootstrap.css" rel='stylesheet' type='text/css' />


<!-- Custom CSS -->
<link href="css/style.css" rel='stylesheet' type='text/css' />
<!-- font CSS -->
<!-- font-awesome icons -->
<link href="css/font-awesome.css" rel="stylesheet">
<!-- //font-awesome icons -->
<!-- js-->
<script src="js/jquery-1.11.1.min.js"></script>
<script src="js/modernizr.custom.js"></script>
<!--webfonts-->
<link
	href='https://fonts.googleapis.com/css?family=Roboto+Condensed:400,300,300italic,400italic,700,700italic'
	rel='stylesheet' type='text/css'>
<!--//webfonts-->
<!--animate-->
<link href="css/animate.css" rel="stylesheet" type="text/css"
	media="all">
<script src="js/wow.min.js"></script>
<script>
	new WOW().init();
</script>
<!--//end-animate-->
<!-- Metis Menu -->
<script src="js/metisMenu.min.js"></script>
<script src="js/custom.js"></script>
<link href="css/custom.css" rel="stylesheet">
<!--//Metis Menu -->
</head>
<body>
	<div th:fragment="roomManagementPage">
		<div class="main-page">
			<div class="tables">
				<h3 class="title1">房型价格管理</h3>
				<div class="table-responsive bs-example widget-shadow">
					<h4>表格:</h4><input type="button" onclick="reload()">

					<table id="paging_table" class="table table-bordered">

						<thead>
							<tr>
								<th style="visibility: hidden;">*</th>
								<th>房间类型</th>
								<th>房间押金</th>
								<th>房间单价</th>
								<th style="width: 15%;">操作</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="lstRoomTypeInfo : ${lstRoomTypeInfo.getList()}">
								<td style="visibility: hidden;" th:text="${lstRoomTypeInfo.id}"></td>
								<td th:text="${lstRoomTypeInfo.type}"></td>
								<td th:text="${lstRoomTypeInfo.deposit}"></td>
								<td th:text="${lstRoomTypeInfo.amount}"></td>
								<td>
									<button type="button" class="btn btn-primary"
										data-toggle="modal" data-target="#priceRevisionModal"
										style="float: left;">修 改</button>
								</td>
							</tr>
						</tbody>
					</table>
					 <div class="row">
				        <!--分页文字信息  -->
				        <p class="col-md-6">当前第<span th:text="${lstRoomTypeInfo.pageNum}"></span>页,
				           	 总共<span th:text="${lstRoomTypeInfo.pages}"></span>页,
				            	共有 <span th:text="${lstRoomTypeInfo.total}"></span>条记录
				        </p>
				        <!-- 分页条信息 -->
				        <div class="col-md-6">
				            <nav aria-label="Page navigation">
				                <ul class="pagination">
				                    <li >
				                        <a href="#" th:value="1">首页</a>
				                    </li>
				                    <li class="prev" >
				                        <a href="#" th:value="${lstRoomTypeInfo.prePage}">
				                            <i class="ace-icon fa fa-angle-double-left"></i>
				                          		 上一页
				                        </a>
				                    </li>
				                    <li class="next" >
				                        <a href="#" th:value="${lstRoomTypeInfo.nextPage}" >
				                            <i class="ace-icon fa fa-angle-double-right"></i>
				                            	下一页
				                        </a>
				                    </li>
				                    <li>
				                        <a href="#" th:value="${lstRoomTypeInfo.pages}">尾页</a>
				                    </li>
				 
				                </ul>
				            </nav>
				        </div>
				    </div>
				</div>
			</div>
			<!-- 模态框（Modal） -->
			<div class="modal fade" id="priceRevisionModal" tabindex="-1"
				role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal"
								aria-hidden="true">&times;</button>
							<h4 class="modal-title" id="myModalLabel">修改房型信息</h4>
						</div>
						<form id="modalForm" action="#" method="post">
						<div class="modal-body">
								<input id="rid" name="id"  type="hidden" required>
								<div class="sign-u">
									<div class="sign-up1">
										<h4>房型名称 :</h4>
									</div>
									<div class="sign-up2">
										<input id="rtype" name="type" type="text" required>
									</div>
									<div class="clearfix"></div>
								</div>
								<div class="sign-u">
									<div class="sign-up1">
										<h4>房型押金 :</h4>
									</div>
									<div class="sign-up2">
										<input id="rdeposit" name="deposit" type="text" required>
									</div>
									<div class="clearfix"></div>
								</div>
								<div class="sign-u">
									<div class="sign-up1">
										<h4>房型价格 :</h4>
									</div>
									<div class="sign-up2">
										<input id="ramount"  name="amount" type="text" required>
									</div>
									<div class="clearfix"></div>
								</div>
						</div>
						<div id="alertDiv" class="alert alert-warning" style="display:none">
							<a href="#" class="close" data-dismiss="alert"> &times; </a> <strong id="info"></strong>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-default"
								data-dismiss="modal">关闭</button>
							<button id="qqq" onclick="roomTypeSub()" type="button" class="btn btn-primary" data-dismiss="modal">提交更改</button>
						</div>
						</form>
					</div>
					<!-- /.modal-content -->
				</div>
				<!-- /.modal -->
			</div>
		</div>
	</div>
	<!-- Classie -->
	<script src="js/classie.js"></script>
	<script>
		var menuLeft = document.getElementById('cbp-spmenu-s1'), showLeftPush = document
				.getElementById('showLeftPush'), body = document.body;

		showLeftPush.onclick = function() {
			classie.toggle(this, 'active');
			classie.toggle(body, 'cbp-spmenu-push-toright');
			classie.toggle(menuLeft, 'cbp-spmenu-open');
			disableOther('showLeftPush');
		};

		function disableOther(button) {
			if (button !== 'showLeftPush') {
				classie.toggle(showLeftPush, 'disabled');
			}
		}
	</script>
	<!--scrolling js-->
	<script src="js/jquery.nicescroll.js"></script>
	<script src="js/scripts.js"></script>
	<!--//scrolling js-->

	<!-- Bootstrap Core JavaScript -->
	<script src="js/bootstrap.js">
		
	</script>

	<script type="text/javascript">
		$(".pagination a").click(function(){
			var page = $(this).attr("value");
			$("#dynamicDisplayDiv").load("roompricemanagement.html?page=" + page);
		})
		$('#priceRevisionModal').on('show.bs.modal', function (event) {
	        var btnThis = $(event.relatedTarget); //触发事件的按钮
	        var modal = $(this);  //当前模态框
	       	var modalId = btnThis.data('id');   //解析出data-id的内容 */
	      	//依次获取某一列的内容   eq后面表示列数
	       	var id = btnThis.closest('tr').find('td').eq(0).text();
	        var type = btnThis.closest('tr').find('td').eq(1).text();
	        var deposit = btnThis.closest('tr').find('td').eq(2).text();
	        var amount = btnThis.closest('tr').find('td').eq(3).text();
	        console.log(id + type + deposit + amount)
	       	$("#rid").val(id);
	        $("#rtype").val(type);
	        $("#rdeposit").val(deposit);
	        $("#ramount").val(amount);
	    });
		function roomTypeSub(){
			$.post("roomTypeUpdate",$("#modalForm").serialize(),function(result){
				if(result.resultCode==1){
					$("#alertDiv").attr("class","alert alert-success");
					$("#alertDiv").css("display", "block");
					$("#alertDiv").children("strong").html(result.message);
				}else{
					$("#alertDiv").attr("class","alert alert-warning");
					$("#alertDiv").css("display", "block");
					$("#alertDiv").children("strong").html(result.message);
				}
			});
		}
		function reload(){
			$("#dynamicDisplayDiv").load("roompricemanagement.html");
		}
	</script>
</body>
</html>
